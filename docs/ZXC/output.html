<!DOCTYPE HTML>
<html>
 <head>
  <meta charset="utf-8"/>
  <title>
   Made with Remarkable!
  </title>
  <link href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/github.min.css" rel="stylesheet"/>
  <style type="text/css">
   h1,h2,h3,h4{color:#6495ed}body,table tr{background-color:#fff}table tr td,table tr th{border:1px solid #ccc;text-align:left;padding:6px 13px;margin:0}pre code,table,table tr{padding:0}body{font-family:Helvetica,Arial,sans-serif}h1,h2{text-align:center}blockquote{background:#f9f9f9;border-left:10px solid #6495ed;margin:1.5em 10px;padding:.5em 10px;font-style:italic}blockquote p{display:inline}hr{clear:both;float:none;width:100%;height:2.5px;margin:1.4em 0;border:none;background:#ddd;background:-webkit-gradient(linear,left bottom,right bottom,color-stop(0,#fff),color-stop(.1,#ddd),color-stop(.9,#ddd),color-stop(1,#fff)) #ddd;background:-moz-linear-gradient(left center,#fff 0,#ddd 10%,#ddd 90%,#fff 100%) #ddd}table tr{border-top:1px solid #ccc;margin:0}table tr:nth-child(2n){background-color:#aaa}table tr th{font-weight:700}table tr td :first-child,table tr th :first-child{margin-top:0}table tr td:last-child,table tr th :last-child{margin-bottom:0}code,tt{margin:0 2px;padding:0 5px;white-space:nowrap;border:1px solid #eaeaea;background-color:#f8f8f8;border-radius:3px}pre code{margin:0;white-space:pre;border:none;background:0 0}.highlight pre,pre{background-color:#f8f8f8;border:1px solid #ccc;font-size:13px;line-height:19px;overflow:auto;padding:6px 10px;border-radius:3px}
  </style>
 </head>
 <body>
  <h1>
   Введение
  </h1>
  <p>
   В наше временя оборот информации в бизнес сфере огромен, отцифрованно практически всё. Большая часть информации передаётся по средствам компьютерных сетей, в частности глобальнай – Интернет.
  </p>
  <p>
   Технология Интернет приспособленна для передачи любого вида закодированной информации, чем пользуется в преимуществе большая часть бизнес отраслей для получения своей прибыли. Но во время развития Интернет появилась такая ниша как Взломщики, люди посягающии на не санкционированное получения доступа к ресурсам подключенных к Интернет. Вследствии начали стремительно развиваться технологии Криптографии , которые существующие еще со времён древнего Рима, и других методов борьбы с Взломщиками и не только.
  </p>
  <p>
   Взломищакам могут быть интересны любые ресурсы: журналы Бухгалтерии, системы управления предприятеим и т.д.
  </p>
  <p>
   Подходя к теме о ведении бизнеса в сфере ЧОП многие подозрительные личности могут быть заинтересованн в получении запланированных маршрутов инкосации, адресса жительства сотрудников…
   <br/>
   Для пресечения перечисленных выше махинаций можно полностью отказаться от ведения своей деятельности в Интернет.
  </p>
  <p>
   Если это не выход – тогда необходимо развертывание системы защиты, чем мы и займемся в пределах данной работы.
   <br/>
   Также самым современным решением будет использование Blockchain – децентрализованный метод хранения данных, но данный вариант не будет рассматриваться, так как всё сильно усложняет и, скорее всего, по просту не приемлем.
  </p>
  <p>
   Решение будет выполненно в несколько шагов:
  </p>
  <ol>
   <li>
    Анализ структуры ЧОП.
   </li>
   <li>
    Анализ проходимых процессов в ЧОП.
   </li>
   <li>
    Описание средств разработки.
   </li>
   <li>
    Составление базы данных ЧОП.
   </li>
   <li>
    Разработка архитектуры приложения для взаимодействия с ЧОП.
   </li>
   <li>
    Реализация архитектурных решений
   </li>
   <li>
    Написание исходных кодов.
   </li>
   <li>
    Тестирование.
   </li>
  </ol>
  <h1>
   Теоритическая часть
  </h1>
  <h2>
   Организация ЧОП
  </h2>
  <p>
   Охранное предприятие занимается охраной какой либо частной или государственной собственности.
  </p>
  <p>
   ЧОП, чаще всего состоит из трех подразделений:
  </p>
  <ul>
   <li>
    Бухгалтерия
   </li>
   <li>
    Дирекция(она же администрация)
   </li>
   <li>
    Отдел кадров
   </li>
   <li>
    Отдел охраны
   </li>
   <li>
    Отдел инкосации
   </li>
   <li>
    Отдел вооружения
   </li>
  </ul>
  <p>
   <img alt="" src="/home/xewii/Documents/TIT/ZXC/orgStruct.png"/>
  </p>
  <p>
   Если говорить о предоствляемых услугах более конкретно, то ЧОП для потребителя предлогает:
   <br/>
   - Охрана объекта
   <br/>
   - Охрана ценных бумаг или металов(инкосация)
  </p>
  <h2>
   Информационные потоки ЧОП
  </h2>
  <p>
   <img alt="" src="/home/xewii/Documents/TIT/ZXC/infoFlow.png"/>
  </p>
  <h2>
   Процессы внутри ЧОП
  </h2>
  <p>
   В состав ЧОП входят люди
  </p>
  <h2>
   Взаимодействие заказчика с ЧОП
  </h2>
  <p>
   ...
  </p>
  <h1>
   Описание средстд разработки
  </h1>
  <p>
   В данном разделе будут рассмотрены средства разработки, используемые мной при создании ПС для ЧОП.
  </p>
  <h2>
   Утилиты для разработки баз данных
  </h2>
  <h3>
   SQLite v3.35.5 stable
  </h3>
  <p>
   <img alt="SQLite logo" src=""/>
   <br/>
   SQLite — компактная встраиваемая СУБД. Исходный код библиотеки передан в общественное достояние.
   <br/>
   Данная СУБД работает в безсерверной конфигурации. Если сравнивать с другими СУБД, то в равных условиях запись SQLite осуществляет медленее на 20-30% чем другие СУБД, но чтение превосходит другие на 40-50%. SQLite не имеет привелегий, только систему авторизации, но это и не нужно в моем проекте, об этом будет сказано позже.
  </p>
  <blockquote>
   <p>
    Примичание:
    <br/>
    <em>
     Библиотека SQLite не будет использована в чистом виде, а в составе Qt v6.2.4
    </em>
   </p>
  </blockquote>
  <h3>
   SQLiteBrowser v3.12.2
  </h3>
  <p>
   Удобный FOSS браузер баз данных SQLite, использованный для отладки.
  </p>
  <h3>
   DBVisualizer
  </h3>
  <p>
   Проприетарная утилита для работы с разными СУБД, использован для генерации графа таблиц составленной базы данных ЧОП.
  </p>
  <h2>
   Библиотеки
  </h2>
  <h3>
   Qt v6.2.4
  </h3>
  <p>
   <img alt="Qt logo" src=""/>
   <br/>
   Qt - один из самых популярных и больших фреймворков c++ на рынке. Важная характеристика Qt - переносимость, т.к. я работаю на Linux.
  </p>
  <h2>
   Системы сборки и компиляторы
  </h2>
  <h3>
   CMake v3.22.3
  </h3>
  <p>
   <img alt="CMake logo" src=""/>
   <br/>
   Система сборки c++. Сборка проекта и передача более низкоуровневому средству.
  </p>
  <h3>
   Ninja c1.10.2
  </h3>
  <p>
   Еще одна система сборки, только уже более низкого уровня, чем CMake. Передача исходного кода на компиляцию.
  </p>
  <h3>
   clang v13.0.1
  </h3>
  <p>
   Компилятор семейства C. Без коментариев.
  </p>
  <h2>
   IDE
  </h2>
  <h3>
   QtCreator
  </h3>
  <p>
   <img alt="QtCreator logo" src=""/>
   <br/>
   IDE от компинии The Qt Company, использованный только как средство отладки и создания скелетов форм пользовательского интерфейса.
  </p>
  <h3>
   VIM v8.2
  </h3>
  <p>
   <img alt="VIM logo" src=""/>
   <br/>
   Моя любимая IDE, в своей основе так же прост как и каноничный "блокнот" в Windows, только с максимальной степенью кастомизации. Главное достоинство, по моему мнению, - это управление без использования мыши и возможность настройки управляющих комбинаций максимально удобно, что сокращает время на бесполезное перемещение рук по рабочему пространству.
  </p>
  <h4>
   Плагины
  </h4>
  <pre><code class="language-vim">    Plug 'https://github.com/xolox/vim-misc'                   " auto load
    Plug 'https://github.com/xolox/vim-session'                " session manager
    Plug 'wakatime/vim-wakatime'                               " wakatime.com
    " Plug 'vim-scripts/vim-auto-save'                           " files autosave
    Plug 'SirVer/ultisnips'                                    " snippets
    Plug 'https://github.com/honza/vim-snippets'               " snippents files
    Plug 'https://github.com/pangloss/vim-javascript.git'      " javascript extension
    Plug 'vim-airline/vim-airline'                             " status line
    Plug 'vim-airline/vim-airline-themes'                      " themes
    Plug 'vim-scripts/AfterColors.vim'                         " themes
    Plug 'rafi/awesome-vim-colorschemes'                       " themes
    Plug 'sonph/onehalf', { 'rtp': 'vim' }                     " theme
    Plug 'https://github.com/sjl/badwolf'                      " theme
    Plug 'https://github.com/joshdick/onedark.vim'             " theme
    " Plug 'https://github.com/plasticboy/vim-markdown'          " markdown format support
    Plug 'ryanoasis/vim-devicons'                              " icons support
    " Plug 'powerline/fonts'                                     " powerline fonts
    Plug 'https://github.com/Yggdroot/indentLine'
    Plug 'ycm-core/YouCompleteMe'                              " code completer
    Plug 'rdnetto/YCM-Generator', { 'branch': 'stable'}
    Plug 'tpope/vim-commentary'                                " commentary shortcuts
    " Plug 'm-pilia/vim-pkgbuild'                                " archlinux AUR PKGBUILD files support
    Plug 'https://github.com/tpope/vim-surround'               " html-like tags handle utils
    Plug 'https://github.com/octol/vim-cpp-enhanced-highlight' " cpp syntax hilightinght
    Plug 'ctrlpvim/ctrlp.vim'                                  " file finder
    Plug 'preservim/nerdtree'                                  " dir tree dock
    " Plug 'https://github.com/vim-scripts/taglist.vim'
    Plug 'https://github.com/preservim/tagbar'
    Plug 'vim-scripts/bufkill.vim'                             " exit buffers without exiting vim
    Plug 'jreybert/vimagit'                                    " git support
    Plug 'https://github.com/ap/vim-css-color'                 " HEX-colors hilighting
    Plug 'https://github.com/matze/vim-move'                   " code moving
    " Plug 'https://github.com/sjl/gundo.vim'                    " undo tree
    " Plug 'https://github.com/sheerun/vim-polyglot'             " colors
    Plug 'https://github.com/junegunn/vim-easy-align'          " fast text aligning
    Plug 'https://github.com/ervandew/supertab'
    Plug 'https://github.com/jiangmiao/auto-pairs'             " completing pairs
    Plug 'https://github.com/rhysd/vim-clang-format'           " auto formating
    Plug 'honza/vim-snippets'                                  " set of snippets
    " Plug 'https://github.com/ryanoasis/nerd-fonts'
    Plug 'https://github.com/godlygeek/tabular'                " tab extender
    Plug 'https://github.com/junegunn/vim-easy-align'
    Plug 'https://github.com/fadein/vim-FIGlet'  " figlet
    Plug 'https://github.com/scrooloose/syntastic'
    " Plug 'neoclide/coc.nvim', {'branch': 'release'}
    " Plug 'neoclide/coc-tsserver', {'do': 'yarn install --frozen-lockfile'}
</code></pre>
  <h2>
   Разное
  </h2>
  <h3>
   Plantuml
  </h3>
  <p>
   Средство создания UML диаграм. Использовано для визуализации объектов и просецссов.
  </p>
  <h3>
   BASH
  </h3>
  <p>
   Bourne Again Shell - интерпритатор, использован для автоматизации некотерых процессов.
  </p>
  <h2>
   Отладка
  </h2>
  <h3>
   Valgrind v3.18
  </h3>
  <p>
   Утилита профилирования и отладки программы, использовано в основном для обнаружения утечек памяти.
  </p>
  <h2>
   VCS
  </h2>
  <h3>
   GIT
  </h3>
  <p>
   GIT - система контроля версий, сомо о себе говрит. Использовался в основном для перенесения кода между машинами и как средство дистрибъюции.
  </p>
  <p>
   ...
  </p>
  <h1>
   Разработы базы данных ЧОП
  </h1>
  <p>
   База данных ЧОП в пределах данной работы - головная сущность, вокрук которой будет строится весь функционал.
   <br/>
   База данных будет существовать под управлением SQLite.
  </p>
  <h2>
   Таблицы
  </h2>
  <p>
   В компанию, как известно, входит некоторое количество сотрудников, по этому, я создаю таблицу Users. Название выбрано таковым, потому что она будет содержать данные учетных записей сотрудников и клиентов ЧОП.
  </p>
  <pre><code class="language-sql">CREATE TABLE
    "Users"("id" INTEGER NOT NULL UNIQUE,
            "name" TEXT NOT NULL,
            "entryDate" TEXT NOT NULL,
            "role_id" INTEGER NOT NULL,
            "wapon_id" INTEGER,
            "email" TEXT UNIQUE,
            "login" TEXT NOT NULL UNIQUE,
            "password" BLOB NOT NULL UNIQUE,
            "salt" BLOB NOT NULL,
            "image" BLOB,
            FOREIGN KEY("wapon_id") REFERENCES "Wapons"("id")ON DELETE RESTRICT,
            FOREIGN KEY("role_id") REFERENCES "Roles"("id")ON DELETE RESTRICT,
            PRIMARY KEY("id" AUTOINCREMENT))
</code></pre>
  <p>
   Таблица содержит данные для идентификации:
  </p>
  <ul>
   <li>
    login
   </li>
   <li>
    password
   </li>
   <li>
    salt
   </li>
  </ul>
  <p>
   Пароль не храниться в открытов виде, а зашифорован с использованием динамической соли по алгоритму "Prefered salt algorithm", более подробно будет расмотрен далее.
  </p>
  <p>
   Как видно, таблица Users зависит от таблиц Roles и Wapons, собственно вот они:
  </p>
  <pre><code class="language-sql">CREATE TABLE
    "Roles"("id" INTEGER NOT NULL UNIQUE,
        "name" TEXT NOT NULL UNIQUE,
                "commands_id" INTEGER NOT NULL,
                "payMultipler" DECIMAL(10, 3) NOT NULL,
                "payPeriod" INTEGER NOT NULL,
                FOREIGN KEY("commands_id") REFERENCES
                "roleCommands"("role_id")ON DELETE RESTRICT,
                PRIMARY KEY("id"))
</code></pre>
  <p>
   Роль определяет какие данные и соответственно команды можешь выполнять на сервере. Ссылается на таблицу roleComands - это SQL массив с ID команд, которые может выполнять пользователь с данной ролью, по поэтому я и отказался от других, более тяжелых СУБД, т.к. все необходимые действия делегируются на Сервер, что будет рассмотрено далее, от СУБД требуется только хранить данные и извлекать их.
   <br/>
   Связаная таблица roleCommands:
  </p>
  <pre><code class="language-sql">CREATE TABLE
    "roleCommands"("role_id" INTEGER NOT NULL,
                   "command_id" INTEGER NOT NULL,
                   FOREIGN KEY("role_id") REFERENCES
                   "Roles"("id")ON DELETE RESTRICT)
</code></pre>
  <p>
   Таблица Wapons:
  </p>
  <pre><code class="language-sql">CREATE TABLE "Wapons"("id" INTEGER NOT NULL UNIQUE,
                      "employee_id" INTEGER UNIQUE,
                      "name" TEXT NOT NULL,
                      "ammo" INTEGER NOT NULL,
                      "price" DECIMAL(10, 3) NOT NULL,
                      "ammoPrice" DECIMAL(10, 3) NOT NULL,
                      "image" BLOB,
                      FOREIGN KEY("employee_id") REFERENCES
                      "Users"("id")ON DELETE RESTRICT,
                      PRIMARY KEY("id"))
</code></pre>
  <p>
   Каждая запись в таблице Wapons - это еденица зарегестрированного оружия, в полной мере описывающяя необходимые характеристики для ЧОП.
  </p>
  <p>
   Так как организация имеет свои расходы и доходы, нам нужно сохранять эти данные.
   <br/>
   Таблица Accounting:
  </p>
  <pre><code class="language-sql">CREATE TABLE "Accounting" (
    "id" INTEGER NOT NULL UNIQUE,
    "accountingType_id" INTEGER NOT NULL,
    "pay" DECIMAL(10, 3) NOT NULL,
    "date" TEXT NOT NULL,
    FOREIGN KEY("accountingType_id")
    REFERENCES "AccountingType"("id") ON DELETE RESTRICT,
    PRIMARY KEY("id") )
</code></pre>
  <p>
   Зависит от таблицы AccountingType, описывающей какого рода транзакция была совершена.
  </p>
  <pre><code class="language-sql">CREATE TABLE "AccountingType" (
    "id" INTEGER NOT NULL UNIQUE,
    "name" TEXT NOT NULL UNIQUE,
    PRIMARY KEY("id","name") )
</code></pre>
  <p>
   ЧОП получает доход от контрактов, по этому была составлена таблица Contracts:
  </p>
  <pre><code class="language-sql">CREATE TABLE
    "Contracts"("id" INTEGER NOT NULL UNIQUE,
                "assignedEmployees_id" INTEGER NOT NULL,
                "customer_id" INTEGER NOT NULL,
                "objectType_id" INTEGER NOT NULL,
                "objectAddress" TEXT NOT NULL,
                "objectWayPoint" TEXT, "date" TEXT NOT NULL,
                "expirationDate" TEXT NOT NULL,
                "weekends" TEXT NOT NULL,
                FOREIGN KEY("customer_id") REFERENCES
                "Users"("id")ON DELETE RESTRICT,
                PRIMARY KEY("id"),
                FOREIGN KEY("assignedEmployees_id") REFERENCES
                "AssignedEmployees"("employee_id") ON DELETE RESTRICT,
                FOREIGN KEY("objectType_id") REFERENCES
                "objectType"("id")ON DELETE RESTRICT)
</code></pre>
  <p>
   Запись в таблице Contracts это сделка вида, описанного в связаной таблице objetType.
   <br/>
   Таблица objetType:
  </p>
  <pre><code class="language-sql">CREATE TABLE
    "objectType" ( "id" INTEGER NOT NULL UNIQUE,
               "name" TEXT NOT NULL UNIQUE,
                   "price" DECIMAL(10, 3) NOT NULL,
                   PRIMARY KEY("id") )
</code></pre>
  <p>
   Запись в данной таблице описывает объект контракта, где указывается базавая цена за период оплаты(payPeriod) исполнителя/исполнителей контракта(assignedEmployees_id).
   <br/>
   Для привязки нескольких сотрудников, была создана еще одна таблица AssignedEmployees, являющейся массивом.
  </p>
  <pre><code class="language-sql">CREATE TABLE "AssignedEmployees" (
    "id" INTEGER NOT NULL,
    "employee_id" INTEGER NOT NULL,
    "guiltyPercent" DECIMAL(10, 3) NOT NULL,
    "usedAmmo" INTEGER,
    FOREIGN KEY("employee_id") REFERENCES
    "Users"("id") ON DELETE RESTRICT,
    PRIMARY KEY("id") )
</code></pre>
  <p>
   Для создания контракта в данной таблице нужно только 2 поля - id, employee_id.
   <br/>
   Так так во время исполнения может произойти какой то ицедент, то была создана таблица Accidents:
  </p>
  <pre><code class="language-sql">CREATE TABLE "Accidents" (
    "id" INTEGER NOT NULL UNIQUE,
    "name" TEXT NOT NULL,
    "contract_id"
    INTEGER NOT NULL,
    "usedAmmoCount" INTEGER,
    "damagePrice" DECIMAL(10, 3),
    "assignedEmployees_id" INTEGER,
    FOREIGN KEY("contract_id") REFERENCES "Contracts"("id") ON DELETE RESTRICT,
    FOREIGN KEY("assignedEmployees_id") REFERENCES "AssignedEmployees"("id") ON DELETE RESTRICT,
    PRIMARY KEY("id") )
</code></pre>
  <p>
   Описывает проишествия, произошедшие во время исполнения контракта.
  </p>
  <h2>
   Сылки в таблице
  </h2>
  <p>
   <img alt="" src="/home/xewii/Documents/TIT/ZXC/databaseReferences.png"/>
  </p>
  <h1>
   Разработка архитектуры приложения
  </h1>
  <p>
   Приложение для взаимодействия с моделью ЧОП, построенной ранее, должно предоставлять функционал для реализации всех описанных процессов взаимодействия с моделью ЧОП.
  </p>
  <h2>
   Основа
  </h2>
  <p>
   Основной функцией приложения, как понятно из темы курсовой работы, будет обеспечение безопасности данных.
   <br/>
   Исходя из этого в голову приходит идея организовать клиент-серверную архитектуру приложения, но это не главная причина почему выбрана такая архитектура. Основная причина - необходимость принимать заказы от клиентов, предоставить им функционал для удобного взаимодействия с персоналом ЧОП, но по большей части он будет взаимодействовать с клавиатурой.
   <br/>
   И для персонала ЧОП тоже будет намного удобнее и быстрее использовать унифицированные методы итерации с базой данных и самой организацией.
  </p>
  <h3>
   Информационные потоки ЧОП с учетом сервера
  </h3>
  <p>
   <img alt="" src="/home/xewii/Documents/TIT/ZXC/infoServiceFlow.png"/>
  </p>
  <h2>
   Обращение к базе данных
  </h2>
  <h3>
   Система безопасности
  </h3>
  <h4>
   Система идентификации и авторизации
  </h4>
  <h4>
   Система команд
  </h4>
  <h2>
   Клиен-Сервер
  </h2>
  <h3>
   Протокол
  </h3>
  <h3>
   Клиент
  </h3>
  <h3>
   Сервер
  </h3>
  <h2>
   Пользовательский интерфейс
  </h2>
  <h1>
   Реализация приложения
  </h1>
  <h1>
   Заключение
  </h1>
  <h1>
   Список литиратуры
  </h1>
  <ol>
   <li>
    https://wiki.qt.io - документация Qt
   </li>
   <li>
    https://www.sqlite.org/ - документация SQLite
   </li>
  </ol>
  <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/highlight.min.js">
  </script>
  <script>
   hljs.initHighlightingOnLoad();
  </script>
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript">
  </script>
  <script type="text/javascript">
   MathJax.Hub.Config({"showProcessingMessages" : false,"messageStyle" : "none","tex2jax": { inlineMath: [ [ "$", "$" ] ] }});
  </script>
 </body>
</html>